import{r as h,R as t}from"./iframe-CdBagT6A.js";import"./preload-helper-PPVm8Dsz.js";const S=({fields:l,initialValues:x={},onSubmit:u,submitLabel:E="Submit",cancelLabel:L="Cancel",onCancel:f,loading:c=!1,disabled:d=!1,className:R="",style:A,renderFooter:k})=>{const[m,P]=h.useState(()=>{const e={};return l.forEach(a=>{e[a.name]=x[a.name]??a.defaultValue??(a.type==="checkbox"?!1:a.type==="multiselect"?[]:"")}),e}),[N,F]=h.useState({}),[b,q]=h.useState(!1),w=(e,a)=>e.required&&(a===""||a===void 0||a===null||Array.isArray(a)&&a.length===0)?"Required":e.pattern&&a&&!new RegExp(e.pattern).test(a)?"Invalid format":e.min!==void 0&&typeof a=="number"&&a<e.min?`Minimum: ${e.min}`:e.max!==void 0&&typeof a=="number"&&a>e.max?`Maximum: ${e.max}`:e.validate?e.validate(a,m):null,C=e=>e.conditional?m[e.conditional.field]===e.conditional.value:!0,i=(e,a)=>{P(n=>({...n,[e]:a})),F(n=>({...n,[e]:null}))},B=e=>{e.preventDefault();const a={};l.forEach(s=>{C(s)&&(a[s.name]=w(s,m[s.name]))}),F(a),Object.values(a).every(s=>!s)&&u&&(q(!0),Promise.resolve(u(m)).finally(()=>q(!1)))},O=e=>{if(!C(e))return null;const a=m[e.name],n=N[e.name],s={id:e.id,name:e.name,value:a,onChange:r=>{if(e.type==="checkbox")i(e.name,r.target.checked);else if(e.type==="file")i(e.name,r.target.files?.[0]??null);else if(e.type==="multiselect"){const o=Array.from(r.target.selectedOptions||[]).map($=>$.value);i(e.name,o)}else if(e.type==="number"||e.type==="currency"){const o=r.target.value===""?"":Number(r.target.value);i(e.name,isNaN(o)?"":o)}else i(e.name,r.target.value)},disabled:d||c,placeholder:e.placeholder,className:`block w-full rounded-md border px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-primary-500 ${n?"border-red-500":"border-gray-300"} ${e.type==="checkbox"?"w-auto":""}`};if(e.customRender)return t.createElement("div",{key:e.id,className:"mb-4"},t.createElement("label",{htmlFor:e.id,className:"block font-medium mb-1"},e.label,e.required&&t.createElement("span",{className:"text-red-500 ml-1"},"*")),e.customRender({value:a,onChange:r=>i(e.name,r),field:e,values:m,error:n}),n&&t.createElement("div",{className:"text-xs text-red-500 mt-1"},n));switch(e.type){case"text":case"email":case"phone":case"currency":case"date":case"number":return t.createElement("div",{key:e.id,className:"mb-4"},t.createElement("label",{htmlFor:e.id,className:"block font-medium mb-1"},e.label,e.required&&t.createElement("span",{className:"text-red-500 ml-1"},"*")),t.createElement("input",{type:e.type==="currency"?"number":e.type,...s}),n&&t.createElement("div",{className:"text-xs text-red-500 mt-1"},n));case"textarea":return t.createElement("div",{key:e.id,className:"mb-4"},t.createElement("label",{htmlFor:e.id,className:"block font-medium mb-1"},e.label,e.required&&t.createElement("span",{className:"text-red-500 ml-1"},"*")),t.createElement("textarea",{...s,rows:3}),n&&t.createElement("div",{className:"text-xs text-red-500 mt-1"},n));case"select":return t.createElement("div",{key:e.id,className:"mb-4"},t.createElement("label",{htmlFor:e.id,className:"block font-medium mb-1"},e.label,e.required&&t.createElement("span",{className:"text-red-500 ml-1"},"*")),t.createElement("select",{...s},t.createElement("option",{value:""},"Select..."),e.options?.map(r=>t.createElement("option",{key:r.id,value:r.value,disabled:r.disabled},r.label))),n&&t.createElement("div",{className:"text-xs text-red-500 mt-1"},n));case"multiselect":return t.createElement("div",{key:e.id,className:"mb-4"},t.createElement("label",{htmlFor:e.id,className:"block font-medium mb-1"},e.label,e.required&&t.createElement("span",{className:"text-red-500 ml-1"},"*")),t.createElement("select",{...s,multiple:!0},e.options?.map(r=>t.createElement("option",{key:r.id,value:r.value,disabled:r.disabled},r.label))),n&&t.createElement("div",{className:"text-xs text-red-500 mt-1"},n));case"checkbox":return t.createElement("div",{key:e.id,className:"mb-4 flex items-center"},t.createElement("input",{type:"checkbox",...s,checked:!!a}),t.createElement("label",{htmlFor:e.id,className:"ml-2 font-medium"},e.label,e.required&&t.createElement("span",{className:"text-red-500 ml-1"},"*")),n&&t.createElement("div",{className:"text-xs text-red-500 ml-2"},n));case"radio":return t.createElement("div",{key:e.id,className:"mb-4"},t.createElement("label",{className:"block font-medium mb-1"},e.label,e.required&&t.createElement("span",{className:"text-red-500 ml-1"},"*")),t.createElement("div",{className:"flex flex-wrap gap-4"},e.options?.map(r=>t.createElement("label",{key:r.id,className:"flex items-center"},t.createElement("input",{type:"radio",name:e.name,value:r.value,checked:a===r.value,onChange:()=>i(e.name,r.value),disabled:d||c||r.disabled}),t.createElement("span",{className:"ml-2"},r.label)))),n&&t.createElement("div",{className:"text-xs text-red-500 mt-1"},n));case"file":return t.createElement("div",{key:e.id,className:"mb-4"},t.createElement("label",{htmlFor:e.id,className:"block font-medium mb-1"},e.label,e.required&&t.createElement("span",{className:"text-red-500 ml-1"},"*")),t.createElement("input",{type:"file",...s}),n&&t.createElement("div",{className:"text-xs text-red-500 mt-1"},n));case"custom":if(typeof e.customRender=="function"){const r=e.customRender;return r({value:a,onChange:o=>i(e.name,o),field:e,values:m,error:n})}return null;default:return null}},_=Object.values(N).every(e=>!e);return t.createElement("form",{className:`w-full ${R}`,style:A,onSubmit:B},l.map(O),k?k({values:m,errors:N,isValid:_,isSubmitting:b}):t.createElement("div",{className:"flex gap-4 mt-6"},t.createElement("button",{type:"submit",className:"px-4 py-2 rounded bg-primary-600 text-white font-semibold hover:bg-primary-700 disabled:bg-gray-300",disabled:c||d||b},c||b?"Submitting...":E),f&&t.createElement("button",{type:"button",className:"px-4 py-2 rounded bg-gray-200 text-gray-700 font-semibold hover:bg-gray-300",onClick:f,disabled:c||d||b},L)))};try{S.displayName="FormBuilder",S.__docgenInfo={description:"",displayName:"FormBuilder",props:{fields:{defaultValue:null,description:"",name:"fields",required:!0,type:{name:"FormField[]"}},initialValues:{defaultValue:{value:"{}"},description:"",name:"initialValues",required:!1,type:{name:"Record<string, any>"}},onSubmit:{defaultValue:null,description:"",name:"onSubmit",required:!1,type:{name:"((values: Record<string, any>) => void)"}},submitLabel:{defaultValue:{value:"Submit"},description:"",name:"submitLabel",required:!1,type:{name:"string"}},cancelLabel:{defaultValue:{value:"Cancel"},description:"",name:"cancelLabel",required:!1,type:{name:"string"}},onCancel:{defaultValue:null,description:"",name:"onCancel",required:!1,type:{name:"(() => void)"}},loading:{defaultValue:{value:"false"},description:"",name:"loading",required:!1,type:{name:"boolean"}},disabled:{defaultValue:{value:"false"},description:"",name:"disabled",required:!1,type:{name:"boolean"}},className:{defaultValue:{value:""},description:"",name:"className",required:!1,type:{name:"string"}},style:{defaultValue:null,description:"",name:"style",required:!1,type:{name:"CSSProperties"}},renderFooter:{defaultValue:null,description:"",name:"renderFooter",required:!1,type:{name:"((props: { values: Record<string, any>; errors: Record<string, string | null>; isValid: boolean; isSubmitting: boolean; }) => ReactNode)"}}}}}catch{}const I={title:"Composite/FormBuilder",component:S,parameters:{layout:"centered",docs:{description:{component:`
A dynamic FormBuilder component for constructing complex forms declaratively.

- Supports multiple field types: text, textarea, number, select, multiselect, checkbox, radio, date, file, email, phone, currency, custom
- Built-in validation: required, pattern, min/max, custom validators
- Conditional visibility based on other fields
- Custom field rendering via render prop
- Tailwind-styled and accessible by default
        `}}}},V=[{id:"f1",name:"title",label:"Title",type:"text",required:!0,placeholder:"Enter title"},{id:"f2",name:"description",label:"Description",type:"textarea",placeholder:"Enter description"},{id:"f3",name:"price",label:"Monthly Rent ($)",type:"number",min:0,step:50,required:!0},{id:"f4",name:"type",label:"Property Type",type:"select",required:!0,options:[{id:"apartment",label:"Apartment",value:"apartment"},{id:"condo",label:"Condominium",value:"condo"},{id:"house",label:"House",value:"house"}]},{id:"f5",name:"amenities",label:"Amenities",type:"multiselect",options:[{id:"parking",label:"Parking",value:"parking"},{id:"pool",label:"Pool",value:"pool"},{id:"gym",label:"Gym",value:"gym"}]},{id:"f6",name:"isActive",label:"Active Listing",type:"checkbox",defaultValue:!0},{id:"f7",name:"availableFrom",label:"Available From",type:"date",required:!0},{id:"f8",name:"contactEmail",label:"Contact Email",type:"email",pattern:`^[^
@]+@[^
@]+.[^
@]+$`}],p={args:{fields:V,submitLabel:"Create Listing",onSubmit:l=>alert("Submitted: "+JSON.stringify(l,null,2))}},J=[{id:"c1",name:"hasParking",label:"Has Parking?",type:"checkbox"},{id:"c2",name:"parkingSpots",label:"Number of Spots",type:"number",min:0,max:10,step:1,defaultValue:1,required:!0,conditional:{field:"hasParking",value:!0}},{id:"c3",name:"unitType",label:"Unit Type",type:"radio",required:!0,options:[{id:"studio",label:"Studio",value:"studio"},{id:"1br",label:"1 Bedroom",value:"1br"},{id:"2br",label:"2 Bedroom",value:"2br"}]}],y={args:{fields:J,submitLabel:"Save Preferences",onSubmit:l=>alert("Saved: "+JSON.stringify(l,null,2))}},D=[{id:"u1",name:"rent",label:"Rent (USD)",type:"currency",required:!0,validate:l=>l&&l>0?null:"Enter a positive amount"},{id:"u2",name:"photos",label:"Property Photo",type:"file"},{id:"u3",name:"address",label:"Address",type:"custom",customRender:({value:l,onChange:x,error:u})=>t.createElement("div",null,t.createElement("input",{className:`block w-full rounded-md border px-3 py-2 text-sm ${u?"border-red-500":"border-gray-300"}`,placeholder:"123 Main St",value:l??"",onChange:E=>x(E.target.value)}),t.createElement("div",{className:"text-xs text-gray-500 mt-1"},"Autocomplete could be wired here."))}],g={args:{fields:D,submitLabel:"Submit Custom Form",onSubmit:l=>alert("Submitted: "+JSON.stringify(l,null,2))}},v={args:{fields:V,disabled:!0,loading:!0,submitLabel:"Submitting..."}};p.parameters={...p.parameters,docs:{...p.parameters?.docs,source:{originalSource:`{
  args: {
    fields: basicFields,
    submitLabel: 'Create Listing',
    onSubmit: values => alert('Submitted: ' + JSON.stringify(values, null, 2))
  }
}`,...p.parameters?.docs?.source}}};y.parameters={...y.parameters,docs:{...y.parameters?.docs,source:{originalSource:`{
  args: {
    fields: conditionalFields,
    submitLabel: 'Save Preferences',
    onSubmit: values => alert('Saved: ' + JSON.stringify(values, null, 2))
  }
}`,...y.parameters?.docs?.source}}};g.parameters={...g.parameters,docs:{...g.parameters?.docs,source:{originalSource:`{
  args: {
    fields: customFields,
    submitLabel: 'Submit Custom Form',
    onSubmit: values => alert('Submitted: ' + JSON.stringify(values, null, 2))
  }
}`,...g.parameters?.docs?.source}}};v.parameters={...v.parameters,docs:{...v.parameters?.docs,source:{originalSource:`{
  args: {
    fields: basicFields,
    disabled: true,
    loading: true,
    submitLabel: 'Submitting...'
  }
}`,...v.parameters?.docs?.source}}};const j=["Basic","ConditionalLogic","CustomRenderers","DisabledAndLoading"];export{p as Basic,y as ConditionalLogic,g as CustomRenderers,v as DisabledAndLoading,j as __namedExportsOrder,I as default};
